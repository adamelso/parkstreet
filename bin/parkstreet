#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

/** @var \Psr\Container\ContainerInterface $container */
$container = require __DIR__.'/../config/container.php';

$import = new \ParkStreet\Import(
    new \ParkStreet\Client\OfflineClient(),
    new \ParkStreet\Feed\JsonFeed(),
    new \ParkStreet\MetricPipeline(),
    $container->get('doctrine.object_manager')
);

foreach ($import->run() as $unit) {
    printf('Unit %d was imported.'.PHP_EOL, $unit->getUnitId());
}
