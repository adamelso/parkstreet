#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

$config = new \GeneratedHydrator\Configuration(\ParkStreet\Model\Unit::class);

$config->setGeneratedClassesTargetDir(__DIR__.'/../cache/hydrator');
$hydrator = $config->createFactory()->getHydratorClass();

$import = new \ParkStreet\Import(
    new \ParkStreet\Client\OfflineClient(),
    new \ParkStreet\Feed\JsonFeed(),
    new \ParkStreet\Factory\UnitFactory(),
    new $hydrator
);

foreach ($import->run() as $unit) {
    var_dump($unit);
}
